<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Validate with jquery</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
    //Validate dang nhap
    $(document).ready(function(){
        var user=$("#login-username");
        var pass=$("#login-password");
        var messUser=$("#messageUser");
        var messPass=$("#messagePass");
        user.focus();
        $('#btndangnhap').prop('disabled', true);
            $('#loginform').keyup(function() {
                if(user.val()!=''&&pass.val()!='') {
                   $('#btndangnhap').prop('disabled', false);
                }else{
                    $('#btndangnhap').prop('disabled', true);
                }
     });
   
        user.keypress(function(e){
            if(e.keyCode==13){
                if(user.val().length>0){
                    pass.focus();
                }
            }
        });
        
       
        
       
        //Validate dang ky
        //textfield
        var email=$("#email");
        var hoten=$("#hoten");
        var matkhau=$("#matkhau");
        var nhaplaimk=$("#nhaplaimatkhau");
        var cmnd=$("#cmnd");
        var sodienthoai=$("#sodienthoai");
        //messField
        var messEmail1=$("#messEmail");
        var messHoVaTen=$("#messHoVaTen")
        var messMK=$("#messMK");
        var messNLMK=$("#messCMK");
        var messCMND=$("#messcmnd");
        var messSDT=$("#messSDT");
        var sdtRe=/\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/;
        var emailRe=new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);
       
        
        function validateDK(){
            if(!emailRe.test(email.val())){
                    email.css("border","2px solid red");
                    messEmail1.css("color","red");
                    messEmail1.text("Email không đúng định dạng!");
                    return false;
                } if(hoten.val().length<=0){
                    hoten.css("border","2px solid red");
                    messHoVaTen.css("color","red");
                    messHoVaTen.text("Họ và tên không được bỏ trống!");
                    return false;
                } if(matkhau.val().length<=0){
                    matkhau.css("border","2px solid red");
                    messMK.css("color","red");
                    messMK.text("Mật khẩu không được bỏ trống!");
                    return false;
                } if(nhaplaimk.val().length>0){
                    if(nhaplaimk.val()!=matkhau.val()){
                    nhaplaimk.css("border","2px solid red");
                    messNLMK.css("color","red");
                    messNLMK.text("Mật khẩu nhập lại không khớp!");
                    return false;
                    }
                }
              if(nhaplaimk.val().length<=0){
                  nhaplaimk.css("border","2px solid red");
                  messNLMK.css("color","red");
                  messNLMK.text("Mật khẩu nhập lại không khớp!");
                  return false;
              }
            if(cmnd.val().length<=0){
                    cmnd.css("border","2px solid red");
                    messCMND.css("color","red");
                    messCMND.text("Bạn phải nhập chứng minh nhân dân");
                    return false;
                } if(!sdtRe.test(sodienthoai.val())){
                    sodienthoai.css("border","2px solid red");
                    messSDT.css("color","red");
                    messSDT.text("Số điện thoại sai định dạng!");
                    return false;
                }
        }
        
        
        
        
        function xoaVaLiDate(){
           if(emailRe.test(email.val())){
                email.css("border","2px solid green");
                messEmail1.text("");
                }
                if(hoten.val().length>0){
                    hoten.css("border","2px solid green");
                    messHoVaTen.text("");
                }
                if(matkhau.val().length>0){
                    matkhau.css("border","2px solid green");
                    messMK.text("");
                }
                if(nhaplaimk.val().length>0){
                    if(matkhau.val()==nhaplaimk.val()){
                    nhaplaimk.css("border","2px solid green");
                    messNLMK.text("");
                    }else{
                    nhaplaimk.css("border","2px solid red");
                    messNLMK.css("color","red");
                    messNLMK.text("Mật khẩu nhập lại không khớp!");
                    }
                    }
                if(cmnd.val().length>0){
                    cmnd.css("border","2px solid green");
                    messCMND.text("");
                }
                if(sdtRe.test(sodienthoai.val())){
                   sodienthoai.css("border","2px solid green");
                   messSDT.text("");
                }
        }
        $("#signupform").on({
            submit:function(){
                return validateDK();
            },
        keyup:function(){
            xoaVaLiDate();
        }   
        });
       
        //bat loi Backspace
        email.keyup(function(e){
            if(e.keyCode==8){
                if(!emailRe.test(email.val())){
                    email.css("border","2px solid red");
                    messEmail1.css("color","red");
                    messEmail1.text("Email không đúng định dạng!");
                }
            }
            });
        hoten.keyup(function(e){
            if(e.keyCode==8){
               if(hoten.val().length<=0){
                    hoten.css("border","2px solid red");
                    messHoVaTen.css("color","red");
                    messHoVaTen.text("Tên không được bỏ trống!");
                }
            }
        });
        
        matkhau.keyup(function(e){
            if(e.keyCode==8){
                if(matkhau.val().length<=0){
                 matkhau.css("border","2px solid red");
                 messMK.css("color","red");
                 messMK.text("Mật khẩu không được bỏ trống!");
                }
            }
        });
        nhaplaimk.keyup(function(e){
            if(e.keyCode==8){
                if(nhaplaimk.val()!=matkhau.val()){
               nhaplaimk.css("border","2px solid red");
               messNLMK.css("color","red");
               messNLMK.text("Mật khẩu nhập lại không khớp!");
                }
            }
        });
        cmnd.keyup(function(e){
            if(e.keyCode==8){
               if(cmnd.val().length<=0){
               cmnd.css("border","2px solid red");
               messCMND.css("color","red");
               messCMND.text("Bạn phải nhập chứng minh nhân dân!");
               }
            }
        });
        sodienthoai.keyup(function(e){
            if(e.keyCode==8){
                if(!sdtRe.test(sodienthoai.val())){
                 sodienthoai.css("border","2px solid red");
                 messSDT.css("color","red");
                 messSDT.text("Số điện thoại sai định dạng!");
            }
            }
        });
        
            //di chuyen con tro
    
     email.keyup(function(e){
            if(e.keyCode==13){
                if(emailRe.test(email.val())){
               hoten.focus();
            }
            }
            });
        hoten.keyup(function(e){
            if(e.keyCode==13){
                if(hoten.val().length>0){
               matkhau.focus();
                }
            }
        });
        
        matkhau.keyup(function(e){
            if(e.keyCode==13){
                if(matkhau.val().length>0){
                    nhaplaimk.focus();
                }
            }
        });
        nhaplaimk.keyup(function(e){
            if(e.keyCode==13){
               if(matkhau.val()==nhaplaimk.val()){
                cmnd.focus();
               }
            }
        });
        cmnd.keyup(function(e){
            if(e.keyCode==13){
                if(cmnd.val().length>0){
                    sodienthoai.focus();
                }
            }
        
        });
        
        //focus
        $("#dangky").click(function(){
            email.focus();
        });
        $("#signinlink").click(function(){
            user.focus();
        });
    });

</script>

</head>
<body>
      <div class="container">
       
       <!--form dang nhap-->
        <div id="loginbox" style="margin-top:50px;" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">                    
            <div class="panel panel-info" >
                    <div class="panel-heading">
                        <div class="panel-title">Đăng nhập</div>
                        <div style="float:right; font-size: 80%; position: relative; top:-10px"><a href="#">Forgot password?</a></div>
                    </div>     

                    <div style="padding-top:30px" class="panel-body" >

                        <div style="display:none" id="login-alert" class="alert alert-danger col-sm-12"></div>
                            
                        <form id="loginform" class="form-horizontal" role="form" name="dangnhap" method="get">
                                  
                            <table>
                            <tr>
                                <div style="margin-bottom: 25px" class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                        <input id="login-username" type="text" class="form-control" name="username" value="" placeholder="Tên tài khoản hoặc email">                                        
                                    </div>
                            </tr>
                            <tr>
                                <p id="messageUser"></p>
                                </tr> 
                                </table> 
                                
                            <table>
                                <tr>
                                    <div style="margin-bottom: 25px" class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                        <input id="login-password" type="password" class="form-control" name="password" placeholder="Mật khẩu">
                                    </div>
                                </tr>
                                <tr>
                                   <p id="messagePass"></p> 
                                </tr>
                            </table>
                            
                                    
                

                                
                            <div class="input-group">
                                      <div class="checkbox">
                                        <label>
                                          <input id="login-remember" type="checkbox" name="remember" value="1">Nhớ tài khoản
                                        </label>
                                      </div>
                                    </div>


                                <div style="margin-top:10px" class="form-group">
                                    <!-- Button -->

                                    <div class="col-sm-12 controls">
                                      <input type="submit" value="Đăng nhập" class="btn btn-success" id="btndangnhap">
                                      <a id="btn-fblogin" href="#" class="btn btn-primary">Thoát</a>

                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="col-md-12 control">
                                        <div style="border-top: 1px solid#888; padding-top:15px; font-size:85%" >
                                            Bạn chưa có tài khoản! 
                                        <a href="#" onClick="$('#loginbox').hide(); $('#signupbox').show()" id="dangky">
                                            Đăng ký ngay
                                        </a>
                                        </div>
                                    </div>
                                </div>    
                            </form>     



                        </div>                     
                    </div>  
        </div>
        
        <!--form dang ky-->
        <div id="signupbox" style="display:none; margin-top:50px" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <div class="panel-title">Đăng ký</div>
                            <div style="float:right; font-size: 85%; position: relative; top:-10px"><a id="signinlink" href="#" onclick="$('#signupbox').hide(); $('#loginbox').show()">Đăng nhập</a></div>
                        </div>  
                        <div class="panel-body" >
                            <form id="signupform" class="form-horizontal" role="form" name="dangky">
                                
                                <div id="signupalert" style="display:none" class="alert alert-danger">
                                    <p>Error:</p>
                                    <span></span>
                                </div>
                                    
                                
                                  
                                <div class="form-group">
                                    <label for="email" class="col-md-3 control-label">Email</label>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" name="email" placeholder="Email của bạn" id="email">
                                    </div>
                                    <div style="text-align:center" id="messEmail"></div>
                                </div>
                                    
                                <div class="form-group">
                                    <label for="firstname" class="col-md-3 control-label">Họ và tên</label>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" name="ten" placeholder="Họ và tên của bạn" id="hoten">
                                    </div>
                                    <div style="text-align:center" id="messHoVaTen"></div>
                                </div>
                                
                                
                                
                                <div class="form-group">
                                    <label for="password" class="col-md-3 control-label">Mật khẩu</label>
                                    <div class="col-md-9">
                                        <input type="password" class="form-control" name="mk" placeholder="Mật khẩu của bạn" id="matkhau">
                                    </div>
                                    <div style="text-align:center" id="messMK"></div>
                                </div>
                                   
                                   <div class="form-group">
                                    <label for="cpassword" class="col-md-3 control-label">Nhập lại mật khẩu</label>
                                    <div class="col-md-9">
                                        <input type="cpassword" class="form-control" name="cmk" placeholder="nhập lại mật khẩu của bạn" id="nhaplaimatkhau">
                                    </div>
                                    <div style="text-align:center" id="messCMK"></div>
                                </div>
                                    
                                <div class="form-group">
                                    <label for="ngaysinh" class="col-md-3 control-label">Số chứng minh nhân dân</label>
                                    <div class="col-md-9">
                                        <input type="number" class="form-control" name="ngsinh" id="cmnd" placeholder="Số chứng minh nhân dân">
                                    </div>
                                    <div style="text-align:center" id="messcmnd"></div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="password" class="col-md-3 control-label">Số điện thoại</label>
                                    <div class="col-md-9">
                                        <input type="number" class="form-control" name="sdt" placeholder="Số điện thoại của bạn" id="sodienthoai">
                                    </div>
                                    <div style="text-align:center" id="messSDT"></div>
                                </div>
                               

                                <div class="form-group">
                                    <!-- Button -->                                        
                                    <div class="col-md-offset-3 col-md-9">
                                        <input type="submit" class="btn btn-info" value="Đăng ký"> &nbsp
                                        <span style="margin-left:8px;">or</span>  
                                    </div>
                                </div>
                                
                                <div style="border-top: 1px solid #999; padding-top:20px"  class="form-group">
                                    
                                    <div class="col-md-offset-3 col-md-9">
                                        <button id="btn-fbsignup" type="button" class="btn btn-primary"><i class="icon-facebook"></i>Đăng ký bằng Facebook</button>
                                    </div>                                           
                                        
                                </div>
                                      
                            </form>
                         </div>
                    </div>
         </div> 
         
         
    </div>
    
</body>

<script>
    //xử lý đăng nhập và đăng ký
        var email=$("#email");
        var hoten=$("#hoten");
        var matkhau=$("#matkhau");
        var nhaplaimk=$("#nhaplaimatkhau");
        var cmnd=$("#cmnd");
        var sodienthoai=$("#sodienthoai");
        var sdtRe=/\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/;
        var emailRe=new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);
    
        var user=$("#login-username");
        var pass=$("#login-password");
       
    function dangKy(){
        var emailB=Boolean(emailRe.test(email.val()));
        var hotenB=Boolean(hoten.val().length>0);
        var matkhauB=Boolean(matkhau.val().length>0);
        var cMKB=Boolean(nhaplaimk.val()==matkhau.val());
        var cmndB=Boolean(cmnd.val().length>0);
        var sdtB=Boolean(sdtRe.test(sodienthoai.val()));
        if(emailB && hotenB && matkhauB && cMKB && cmndB && sdtB){
            var object={email:email.val(),hoten:hoten.val(),matkhau:matkhau.val(),cmnd:cmnd.val(),sodienthoai:sodienthoai.val()};
            var array=new Array(object);
            localStorage.setItem("taikhoan",JSON.stringify(array));
            alert("Đăng ký thành công");
        }
    }
    function dangNhap(email,pass){
        var array=JSON.parse(localStorage.getItem("taikhoan"));
        var emailMess='';var passMess='';
        for(var i=0;i<array.length;i++){
            if(array[i].email==email&&array[i].matkhau==pass){
                //luu dữ liệu vào session
                emailMess=array[i].email;
                passMess=array[i].matkhau;
                var session={email:array[i].email,matkhau:array[i].matkhau};
                sessionStorage.setItem("taikhoan",JSON.stringify(session));
                var getSession=JSON.parse(sessionStorage.getItem("taikhoan"));
                alert("xin chào:"+getSession.email);
            }
        }
        if(emailMess==''&&passMess==''){
            alert("Tài khoản không tồn tại");
        }
    }
    
    
    $(document).ready(function(){
        $("#signupform").on(
            {
            submit:function(){
                return dangKy();
            },    
            }
        );
        $("#loginform").on({
            submit:function(){
               return dangNhap(user.val(),pass.val());
            }
        });
    });
</script>
</html>